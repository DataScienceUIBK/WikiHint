# WikiHintï¼šç”¨äºæç¤ºæ’åºä¸ç”Ÿæˆçš„äººå·¥æ ‡æ³¨æ•°æ®é›†

<a href="https://doi.org/10.48550/arXiv.2412.01626"><img src="https://img.shields.io/static/v1?label=Paper&message=arXiv&color=green&logo=arxiv"></a>
<a href="https://colab.research.google.com/github/DataScienceUIBK/WikiHint/blob/main/HintRank/Demo.ipynb"><img src="https://img.shields.io/static/v1?label=Colab&message=Colab&logo=Google%20Colab&color=f9ab00"></a>
[![License](https://img.shields.io/badge/License-CC%20BY%204.0-blue)](https://creativecommons.org/licenses/by/4.0/)
[![en](https://img.shields.io/badge/Lang-En-red.svg)](https://github.com/DataScienceUIBK/WikiHint/blob/main/README.md)
[![ch](https://img.shields.io/badge/Lang-Ch-brown.svg)](https://github.com/DataScienceUIBK/WikiHint/blob/main/README.ch.md)

<img src="https://github.com/DataScienceUIBK/WikiHint/blob/main/WikiHint/Pipeline.png">

WikiHint æ˜¯ä¸€ä¸ª**äººå·¥æ ‡æ³¨æ•°æ®é›†**ï¼Œä¸“ä¸º**è‡ªåŠ¨æç¤ºç”Ÿæˆä¸æ’åº**è®¾è®¡ã€‚è¯¥æ•°æ®é›†åŸºäºç»´åŸºç™¾ç§‘ï¼ŒåŒ…å« **1,000 é“é—®é¢˜åŠ 5,000 æ¡æç¤º**ï¼Œæ”¯æŒ**æç¤ºè¯„ä¼°ã€æ’åºå’Œç”Ÿæˆ**ç›¸å…³ç ”ç©¶ã€‚

## ğŸ—‚ æ•°æ®é›†æ¦‚è§ˆ

- **1,000 é“é—®é¢˜**ï¼Œé…æœ‰ **5,000 æ¡äººå·¥åˆ›å»ºçš„æç¤º**ã€‚
- ç”±**äººå·¥æ ‡æ³¨äººå‘˜**æ ¹æ®æç¤ºçš„æœ‰æ•ˆæ€§è¿›è¡Œæ’åºã€‚
- ä½¿ç”¨ **LLMï¼ˆLLaMAã€GPT-4ï¼‰** å’Œ **äººå·¥å®éªŒ** è¿›è¡Œè¯„ä¼°ã€‚
- é€‚ç”¨äº **æç¤ºæ’åº** å’Œ **è‡ªåŠ¨æç¤ºè¯„ä¼°**ã€‚

## ğŸ”¬ ç ”ç©¶è´¡çŒ®

âœ… **é¦–ä¸ªäººå·¥æ ‡æ³¨çš„æç¤ºç”Ÿæˆä¸æ’åºæ•°æ®é›†**ã€‚  
âœ… **HintRank**ï¼šä¸€ç§è½»é‡çº§çš„è‡ªåŠ¨æç¤ºæ’åºæ–¹æ³•ã€‚  
âœ… **äººå·¥å®éªŒ** è¯„ä¼°æç¤ºåœ¨å¸®åŠ©ç”¨æˆ·å›ç­”é—®é¢˜æ–¹é¢çš„æœ‰æ•ˆæ€§ã€‚  
âœ… **å¾®è°ƒå¼€æº LLMï¼ˆLLaMA-3.1ã€GPT-4ï¼‰** ä»¥ä¼˜åŒ–æç¤ºç”Ÿæˆèƒ½åŠ›ã€‚  

## ğŸ“ˆ å…³é”®å‘ç°

- **åŸºäºç­”æ¡ˆçš„æç¤º** å¯æé«˜æç¤ºçš„æœ‰æ•ˆæ€§ã€‚  
- **å¾®è°ƒåçš„ LLaMA æ¨¡å‹** ç”Ÿæˆçš„æç¤ºæ¯”åŸºç¡€æ¨¡å‹æ›´ä¼˜ã€‚  
- **è¾ƒçŸ­çš„æç¤º** é€šå¸¸æ¯”**è¾ƒé•¿çš„æç¤º**æ›´æœ‰æ•ˆã€‚  
- **äººå·¥ç”Ÿæˆçš„æç¤º** åœ¨æ¸…æ™°åº¦å’Œæ’åºä¸Šä¼˜äº LLM ç”Ÿæˆçš„æç¤ºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å…‹éš†ä»£ç ä»“åº“

```sh
git clone https://github.com/DataScienceUIBK/WikiHint.git
cd WikiHint
```

### 2ï¸âƒ£ åŠ è½½æ•°æ®é›†

```python
import json

with open("./WikiHint/training.json", "r") as f:
    training_data = json.load(f)

with open("./WikiHint/test.json", "r") as f:
    test_data = json.load(f)

print(f"è®­ç»ƒé›†ï¼š{len(training_data)} é“é—®é¢˜")
print(f"æµ‹è¯•é›†ï¼š{len(test_data)} é“é—®é¢˜")
```

## ğŸ† HintRankï¼šè½»é‡çº§æç¤ºæ’åºæ–¹æ³•

HintRank æ˜¯ä¸€ç§åŸºäº **BERT æ¨¡å‹** çš„**è‡ªåŠ¨æç¤ºæ’åºæ–¹æ³•**ï¼Œé‡‡ç”¨**æˆå¯¹æ¯”è¾ƒ**çš„æ–¹å¼ï¼Œç¡®å®šæç¤ºçš„**ç›¸å¯¹æœ‰æ•ˆæ€§**ã€‚

<p align="center">
    <img src="https://raw.githubusercontent.com/DataScienceUIBK/WikiHint/main/HintRank/EvaluationMethod.png" width="35%">
</p>

### âœ¨ ä¸»è¦ç‰¹ç‚¹ï¼š
âœ” **è½»é‡çº§**ï¼šå¯åœ¨æœ¬åœ°è¿è¡Œï¼Œæ— éœ€å¤§é‡è®¡ç®—èµ„æºã€‚  
âœ” **æ— éœ€ LLM**ï¼šä¸ä¾èµ–**å¤§è§„æ¨¡ç”Ÿæˆå¼æ¨¡å‹**è¿›è¡Œè¯„ä¼°ã€‚  
âœ” **ç¬¦åˆäººå·¥æ’åº**ï¼šæ’åºç»“æœä¸**äººå·¥æ ‡æ³¨çš„æç¤ºæ’åºé«˜åº¦ä¸€è‡´**ã€‚  

### ğŸ” å·¥ä½œåŸç†ï¼š
1. **å°†é—®é¢˜ä¸ä¸¤ä¸ªæç¤ºè¿æ¥** â†’ è½¬æ¢ä¸º BERT å¯å¤„ç†çš„æ ¼å¼ã€‚  
2. **è®¡ç®—æç¤ºè´¨é‡** â†’ åˆ¤æ–­å“ªä¸ªæç¤º**æ›´æœ‰ç”¨**ã€‚  
3. **ç”Ÿæˆæç¤ºæ’åº** â†’ é€šè¿‡æˆå¯¹æ¯”è¾ƒç¡®å®šæç¤ºçš„æ’åã€‚  

## ğŸ“Œ ä½¿ç”¨ `HintRank` è¿›è¡Œæç¤ºæ’åº

`HintRank` æ¨¡å—å¯åŸºäº **BERT æ¨¡å‹** **è‡ªåŠ¨å¯¹æç¤ºè¿›è¡Œæ’åº**ã€‚

### ğŸš€ åœ¨ Google Colab è¿è¡Œ HintRank æ¼”ç¤º

æ— éœ€æœ¬åœ°å®‰è£…ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ **Google Colab** è¿è¡Œ **HintRank**ã€‚ç‚¹å‡» **[å¯åŠ¨ Colab Notebook](https://colab.research.google.com/github/DataScienceUIBK/WikiHint/blob/main/HintRank/Demo.ipynb)** è¿›è¡Œäº¤äº’å¼ä½“éªŒã€‚

### 1ï¸âƒ£ å®‰è£…ä¾èµ–

å¦‚æœåœ¨æœ¬åœ°è¿è¡Œï¼Œè¯·ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹ä¾èµ–é¡¹ï¼š

```sh
pip install transformers torch numpy scipy
```

### 2ï¸âƒ£ å¯¼å…¥å¹¶åˆå§‹åŒ– HintRank

è¿›å…¥ `HintRank` ç›®å½•å¹¶å¯¼å…¥ `hint_rank` æ¨¡å—ï¼š

```python
from HintRank.hint_rank import HintRank

# åˆå§‹åŒ– HintRank æ¨¡å‹
ranker = HintRank()
```

### 3ï¸âƒ£ å¯¹ç‰¹å®šé—®é¢˜çš„æç¤ºè¿›è¡Œæ’åº

```python
question = "å¥¥åœ°åˆ©çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"
answer = "ç»´ä¹Ÿçº³"
hints = [
    "è«æ‰ç‰¹å’Œè´å¤šèŠ¬æ›¾åœ¨è¿™é‡Œå±…ä½ã€‚",
    "å®ƒæ˜¯æ¬§æ´²çš„ä¸€åº§å¤§åŸå¸‚ã€‚",
    "å¥¥åœ°åˆ©æœ€å¤§çš„åŸå¸‚ã€‚"
]

# è¿›è¡Œæˆå¯¹æ¯”è¾ƒ
better_hint_answer_aware = ranker.pairwise_compare(question, hints[1], hints[2], answer)
better_hint_answer_agnostic = ranker.pairwise_compare(question, hints[0], hints[1])

print(f"åŸºäºç­”æ¡ˆçš„æ’åºï¼šæç¤º {2 if better_hint_answer_aware == 1 else 3} ä¼˜äº æç¤º {3 if better_hint_answer_aware == 0 else 2}ã€‚")
print(f"ä¸è€ƒè™‘ç­”æ¡ˆçš„æ’åºï¼šæç¤º {1 if better_hint_answer_agnostic == 1 else 2} ä¼˜äº æç¤º {2 if better_hint_answer_agnostic == 0 else 1}ã€‚")
```

### 4ï¸âƒ£ è¿›è¡Œå¤šæç¤ºæ’åº

æ‚¨ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§å¯¹å¤šä¸ªæç¤ºè¿›è¡Œæ’åºï¼š

```python
print("\nåŸºäºç­”æ¡ˆçš„æç¤ºæ’åºï¼š")
ranked_hints_answer_aware = ranker.listwise_compare(question, hints, answer)
for i, (hint, _) in enumerate(ranked_hints_answer_aware):
    print(f"æ’å {i + 1}ï¼š{hint}")

print("\nä¸è€ƒè™‘ç­”æ¡ˆçš„æç¤ºæ’åºï¼š")
ranked_hints_answer_agnostic = ranker.listwise_compare(question, hints)
for i, (hint, _) in enumerate(ranked_hints_answer_agnostic):
    print(f"æ’å {i + 1}ï¼š{hint}")
```

---

### ğŸ“Œ é¢„æœŸè¾“å‡º

```
æˆå¯¹æç¤ºæ¯”è¾ƒï¼š
	åŸºäºç­”æ¡ˆï¼šæç¤º 3 ä¼˜äº æç¤º 2ã€‚
	ä¸è€ƒè™‘ç­”æ¡ˆï¼šæç¤º 2 ä¼˜äº æç¤º 1ã€‚

å¤šæç¤ºæ’åºï¼š
	åŸºäºç­”æ¡ˆçš„æ’åºï¼š
		æ’å 1ï¼šå¥¥åœ°åˆ©æœ€å¤§çš„åŸå¸‚ã€‚
		æ’å 2ï¼šè«æ‰ç‰¹å’Œè´å¤šèŠ¬æ›¾åœ¨è¿™é‡Œå±…ä½ã€‚
		æ’å 3ï¼šå®ƒæ˜¯æ¬§æ´²çš„ä¸€åº§å¤§åŸå¸‚ã€‚

	ä¸è€ƒè™‘ç­”æ¡ˆçš„æ’åºï¼š
		æ’å 1ï¼šå®ƒæ˜¯æ¬§æ´²çš„ä¸€åº§å¤§åŸå¸‚ã€‚
		æ’å 2ï¼šå¥¥åœ°åˆ©æœ€å¤§çš„åŸå¸‚ã€‚
		æ’å 3ï¼šè«æ‰ç‰¹å’Œè´å¤šèŠ¬æ›¾åœ¨è¿™é‡Œå±…ä½ã€‚
```

---

## ğŸ“Š ğŸ†š WikiHint vs. TriviaHG æ•°æ®é›†å¯¹æ¯”

ä¸‹è¡¨æ¯”è¾ƒäº† **WikiHint** å’Œ **TriviaHG**ï¼ˆæ­¤å‰æœ€å¤§çš„æç¤ºç”Ÿæˆæ•°æ®é›†ï¼‰ã€‚WikiHint åœ¨å¤šä¸ªè¯„ä¼°æŒ‡æ ‡ä¸Šè¡¨ç°æ›´ä¼˜ï¼ŒåŒ…æ‹¬ **æ›´é«˜çš„æ”¶æ•›æ€§**ã€**æ›´çŸ­çš„æç¤º** å’Œ **æ›´é«˜è´¨é‡çš„æç¤º**ã€‚

| **æ•°æ®é›†** | **å­é›†** | **ç›¸å…³æ€§** | **å¯è¯»æ€§** | **æ”¶æ•›æ€§** | **ç†Ÿæ‚‰åº¦** | **æç¤ºé•¿åº¦** | **ç­”æ¡ˆæ³„éœ²ï¼ˆå‡å€¼ï¼‰** | **ç­”æ¡ˆæ³„éœ²ï¼ˆæœ€å¤§å€¼ï¼‰** |
|------------|-----------|--------------|----------------|--------------|--------------|---------|----------------|----------------|
| TriviaHG   | å…¨éƒ¨      | 0.95         | 0.71           | 0.57         | 0.77         | 20.82   | 0.23           | 0.44           |
| WikiHint   | å…¨éƒ¨      | 0.98         | 0.72           | 0.73         | 0.75         | 17.82   | 0.24           | 0.49           |
| TriviaHG   | è®­ç»ƒé›†    | 0.95         | 0.73           | 0.57         | 0.75         | 21.19   | 0.22           | 0.44           |
| WikiHint   | è®­ç»ƒé›†    | 0.98         | 0.71           | 0.74         | 0.76         | 17.77   | 0.24           | 0.49           |
| TriviaHG   | æµ‹è¯•é›†    | 0.95         | 0.73           | 0.60         | 0.77         | 20.97   | 0.23           | 0.44           |
| WikiHint   | æµ‹è¯•é›†    | 0.98         | 0.83           | 0.72         | 0.73         | 18.32   | 0.24           | 0.47           |

ğŸ“Œ **ä¸»è¦å‘ç°**ï¼š
- **WikiHint åœ¨æ”¶æ•›æ€§ä¸Šä¼˜äº TriviaHG**ï¼Œè¿™æ„å‘³ç€å®ƒçš„æç¤ºæ›´æœ‰åŠ©äºç”¨æˆ·**æ›´å¿«åœ°æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆ**ã€‚
- **WikiHint çš„æç¤ºæ›´çŸ­**ï¼Œæä¾›**æ›´ç®€æ´å’Œæœ‰æ•ˆçš„æŒ‡å¯¼**ã€‚

## ğŸ“ŠğŸ¤– ç”Ÿæˆæç¤ºçš„è¯„ä¼°

ä¸‹è¡¨å±•ç¤ºäº†ä¸åŒ **LLMï¼ˆLLaMA-3.1ã€GPT-4ï¼‰** ç”Ÿæˆçš„æç¤ºåœ¨ **ç›¸å…³æ€§ã€å¯è¯»æ€§ã€æ”¶æ•›æ€§ã€ç†Ÿæ‚‰åº¦ã€æç¤ºé•¿åº¦å’Œç­”æ¡ˆæ³„éœ²** æ–¹é¢çš„è¯„ä¼°ã€‚è¿™å¯ä»¥å¸®åŠ©ç†è§£ **å¾®è°ƒï¼ˆFTï¼‰** å’Œ **åŸºäºç­”æ¡ˆï¼ˆwAï¼‰** å¯¹æç¤ºè´¨é‡çš„å½±å“ã€‚

| **æ¨¡å‹** | **é…ç½®** | **ä½¿ç”¨ç­”æ¡ˆï¼Ÿ** | **ç›¸å…³æ€§** | **å¯è¯»æ€§** | **æ”¶æ•›æ€§ï¼ˆLLaMA-8Bï¼‰** | **æ”¶æ•›æ€§ï¼ˆLLaMA-70Bï¼‰** | **ç†Ÿæ‚‰åº¦** | **æç¤ºé•¿åº¦** | **ç­”æ¡ˆæ³„éœ²ï¼ˆå‡å€¼ï¼‰** | **ç­”æ¡ˆæ³„éœ²ï¼ˆæœ€å¤§å€¼ï¼‰** |
|-----------|----------|---------------|--------------|----------------|------------------|------------------|--------------|---------|----------------|----------------|
| **GPT-4**    | åŸå§‹      | âœ…      | 0.91         | 1.00           | 0.14             | 0.48             | 0.84         | 26.36   | 0.23           | 0.51           |
| **GPT-4**    | åŸå§‹      | âŒ      | 0.92         | 1.10           | 0.12             | 0.47             | 0.81         | 26.93   | 0.24           | 0.52           |
| **LLaMA-3.1-405b** | åŸå§‹  | âœ… | 0.94         | 1.49           | 0.11             | 0.47             | 0.76         | 41.81   | 0.23           | 0.50           |
| **LLaMA-3.1-405b** | åŸå§‹  | âŒ| 0.92         | 1.53           | 0.10             | 0.45             | 0.78         | 50.91   | 0.23           | 0.50           |
| **LLaMA-3.1-70b**  | FTwA    | âœ… | 0.88         | 1.50           | 0.09             | 0.42             | 0.84         | 43.69   | 0.22           | 0.48           |

ğŸ“Œ **å…³é”®ç»“è®º**ï¼š
- **ç›¸å…³æ€§**ï¼š**æ›´å¤§è§„æ¨¡çš„æ¨¡å‹ï¼ˆ405bã€70bï¼‰æä¾›æ›´ä¼˜è´¨çš„æç¤º**ï¼Œç›¸æ¯”ä¹‹ä¸‹å°å‹æ¨¡å‹ï¼ˆ8bï¼‰è¡¨ç°è¾ƒå¼±ã€‚
- **å¯è¯»æ€§**ï¼š**GPT-4 ç”Ÿæˆçš„æç¤ºæœ€å®¹æ˜“ç†è§£**ã€‚
- **æ”¶æ•›æ€§**ï¼š**åŸºäºç­”æ¡ˆçš„æç¤ºï¼ˆwAï¼‰èƒ½å¸®åŠ© LLM ç”Ÿæˆæ›´å¥½çš„æç¤º**ã€‚
- **ç†Ÿæ‚‰åº¦**ï¼šè¾ƒå¤§çš„æ¨¡å‹èƒ½å¤Ÿ**ç”Ÿæˆæ›´ç¬¦åˆå¸¸è¯†çš„æç¤º**ã€‚
- **æç¤ºé•¿åº¦**ï¼š**å¾®è°ƒåçš„æ¨¡å‹ï¼ˆFTwAã€FTwoAï¼‰ç”Ÿæˆæ›´çŸ­ä¸”æ›´ä¼˜è´¨çš„æç¤º**ã€‚

---

## ğŸ“‚ ä»£ç ä»“åº“ç»“æ„

```
ğŸ“‚ WikiHint/               # ğŸ—‚ æ•°æ®é›†æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ Pipeline.png    # ğŸ“Š æ•°æ®é›†å¤„ç†æµç¨‹
â”‚   â”œâ”€â”€ ğŸ“„ training.json   # ğŸ“Š è®­ç»ƒæ•°æ®é›†ï¼ˆ900 é“é—®é¢˜ï¼Œ4500 æ¡æç¤ºï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ test.json       # ğŸ“Š æµ‹è¯•æ•°æ®é›†ï¼ˆ100 é“é—®é¢˜ï¼Œ500 æ¡æç¤ºï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ Experiments/        # ğŸ§ª LLM ç”Ÿæˆçš„æç¤º
â”‚   â”œâ”€â”€ ğŸ“„ GPT-4-Vanilla-answer-agnostic.json
â”‚   â”œâ”€â”€ ğŸ“„ GPT-4-Vanilla-answer-aware.json
â”‚   â”œâ”€â”€ ğŸ“„ LLaMA-3.1-70b-FTwA-answer-aware.json
â”‚   â”œâ”€â”€ ğŸ“„ LLaMA-3.1-70b-FTwoA-answer-agnostic.json
â”‚
â”œâ”€â”€ ğŸ“‚ HintRank/           # ğŸ† æç¤ºæ’åºæ–¹æ³•
â”‚   â”œâ”€â”€ ğŸ“„ EvaluationMethod.png  # ğŸ“Š HintRank è¯„ä¼°æ–¹æ³•å¯è§†åŒ–
â”‚   â”œâ”€â”€ ğŸ“„ hint_rank.py          # ğŸ“œ HintRank å®ç°
â”‚
â”œâ”€â”€ ğŸ“‚ HumanEvaluation/    # ğŸ‘¨â€ğŸ”¬ äººå·¥è¯„ä¼°æ•°æ®
â”‚   â”œâ”€â”€ ğŸ“‚ Person_1/  
â”‚   â”‚   â”œâ”€â”€ ğŸ“‘ Part_1.xlsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“‘ Part_2.xlsx
â”‚   â”‚   â”œâ”€â”€ ...ï¼ˆå…¶ä½™åŒ Person_1ï¼‰
â”‚
â””â”€â”€ ğŸ“˜ README.md           # ğŸ“– æœ¬æ–‡ä»¶
```

## ğŸ“œ è®¸å¯åè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **Creative Commons Attribution 4.0 International License (CC BY 4.0)** è®¸å¯ã€‚æ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€å…±äº«å’Œä¿®æ”¹æ•°æ®é›†ï¼Œä½†éœ€æ³¨æ˜å‡ºå¤„ã€‚

## ğŸ“‘ è®ºæ–‡å¼•ç”¨

å¦‚æœæ‚¨è§‰å¾—æœ¬é¡¹ç›®å¯¹æ‚¨çš„ç ”ç©¶æœ‰æ‰€å¸®åŠ©ï¼Œè¯·å¼•ç”¨ [ğŸ“œæˆ‘ä»¬çš„è®ºæ–‡](https://doi.org/10.48550/arXiv.2412.01626)ï¼š

```bibtex
@article{mozafari2025wikihinthumanannotateddatasethint,
      title={WikiHint: A Human-Annotated Dataset for Hint Ranking and Generation}, 
      author={Jamshid Mozafari and Florian Gerhold and Adam Jatowt},
      year={2025},
      eprint={2412.01626},
      archivePrefix={arXiv},
      primaryClass={cs.CL},
      doi={10.48550/arXiv.2412.01626}, 
}
```

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ä»¥åŠå› æ–¯å¸ƒé²å…‹å¤§å­¦ï¼ˆUniversity of Innsbruckï¼‰å¯¹æœ¬é¡¹ç›®çš„æ”¯æŒã€‚
